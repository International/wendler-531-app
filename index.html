<html>
  <head>
    <title>Wendler 5-3-1 Cycle Calculator</title>
    <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
    <link rel="stylesheet" href="http://twitter.github.com/bootstrap/1.4.0/bootstrap.min.css">
    <style type="text/css">
      section {
        padding-top: 40px;
        /*padding-right: 20px;*/
      }
      label {
        text-align: left;
        width: auto;
      }
      input {
        margin: 0 10px;
      }
      input + span {
        margin-left: 10px;
      }
      .container-fluid {
        min-width: 0;
      }
      .container-fluid > .content {
        margin-left: 20px;
      }
      body {
        padding-top: 20px;
      }
    </style>
  </head>
  <body>
    <div class="topbar">
      <div class="topbar-inner">
        <div class="container-fluid">
        <a class="brand" href="">Wendler 5-3-1 Cycle Calculator</a>
        </div>
      </div>
    </div>
    <div class="container-fluid">
      <div class="content">
    <section>
      <h2 class="row">How to use</h2>
      <div class="row">
        Enter your weight in the form below.  The page will update with the weights and reps you'll do to keep up with the Wendler 5/3/1 cycle.
      </div>
    </section>
    <section>
      <h2 class="row">Setup</h2>
      <div class="row">
        <label for="weight">1-Rep Max:</label> <input name="weight" id="weight" type="text" value="100"> <button class="btn primary">Calculate</button>
      </div>
      <div class="row">
        <input style="padding-left: 40px;" checked name="rounding" id="rounding" type="checkbox"><span>Round down to nearest multiple of 5?</span>
      </div>
    </section>
    <section>
      <h2 class="row">Working 1-Rep Max</h2>
      <div class="row">
        All of your work for this cycle is based off a working 1-rep max of <strong><span id="working"></span></strong> pounds.
      </div>
    </section>
    <section>
      <h2 class="row">Schedule</h2>
      <table class="zebra-striped bordered-table row">
        <tr>
          <th>Week 1 (5-5-5+)</th>
          <th>Week 2 (3-3-3+)</th>
          <th>Week 3 (5-3-1+)</th>
          <th>Week 4 (deload)</th>
        </tr>
        <tr>
          <td data-reps="5" data-percent="40"></td>
          <td data-reps="5" data-percent="40"></td>
          <td data-reps="5" data-percent="40"></td>
          <td data-reps="5" data-percent="40"></td>        
        </tr>
        <tr>
          <td data-reps="5" data-percent="50"></td>
          <td data-reps="5" data-percent="50"></td>
          <td data-reps="5" data-percent="50"></td>
          <td data-reps="5" data-percent="50"></td>
        </tr>
        <tr>
          <td data-reps="3" data-percent="60"></td>
          <td data-reps="3" data-percent="60"></td>
          <td data-reps="3" data-percent="60"></td>
          <td data-reps="5" data-percent="60"></td>
        </tr>
        <tr>
          <td data-reps="5" data-percent="65"></td>
          <td data-reps="3" data-percent="70"></td>
          <td data-reps="5" data-percent="75"></td>
          <td></td>
        </tr>
        <tr>
          <td data-reps="5" data-percent="75"></td>
          <td data-reps="3" data-percent="80"></td>
          <td data-reps="3" data-percent="85"></td>
          <td></td>
        </tr>
        <tr>
          <td class="final" data-reps="5+" data-percent="85"></td>
          <td class="final" data-reps="3+" data-percent="90"></td>
          <td class="final" data-reps="1+" data-percent="95"></td>
          <td></td>
        </tr>
      </table>
    </section>
    <section>
      <h2 class="row">About</h2>
      <span class="row">This page was put together by <a href="http://paulswartz.net">Paul Swartz</a>.  You can find him on Twitter <a href="http://www.twitter.com/paulswartz">@paulswartz</a>.  Source code available at <a href="https://github.com/paulswartz/wendler-531-app">Github</a>.</span>
    </section>
    </div>
      </div>
  </body>
  <script type="text/javascript">
    function round(val) {
        if (!$("#rounding").prop('checked')) {
            return val;
        } else {
            return Math.floor(val / 5) * 5;
        }
    }
    function getHash() {
        max = parseInt($("#weight").val());
        checked = $("#rounding").prop("checked");
        if (!checked) {
            return '#a' + max;
        } else {
            return '#' + max;
        }
    }
    function recalculate() {
        max = parseInt($("#weight").val());
        workingmax = parseInt(max * 0.9);
        $("#working").text(workingmax);
        $("td[data-percent]").each(function(index) {
            elm = $(this);
            percent = parseInt(elm.attr('data-percent'));
            reps = elm.attr('data-reps');
            w = round(parseInt(workingmax * percent * 0.01));
            elm.text(w + "#, " + reps + " reps");
        });
        location.hash = getHash();
    }
    $("#weight").change(recalculate);
    $("#rounding").change(recalculate);
    var start = 1;
    if (location.hash.slice(1, 2) === "a") {
        $("#rounding").prop("checked", false);
        start = 2;
    }
    if (parseInt(location.hash.slice(start))) {
        $("#weight").val(location.hash.slice(start));
    }
    recalculate();
  </script>
</html>
    
